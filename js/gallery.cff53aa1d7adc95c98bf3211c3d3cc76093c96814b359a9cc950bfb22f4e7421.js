(()=>{var f=class{constructor(){this.lightGalleryInstances=[],this.justifiedGalleryInstances=[],this.config=window.HUGO_CONFIG?.gallery||{},this.galleries=[],this.init()}init(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>this.setup()):this.setup()}setup(){this.loadDependencies().then(()=>{this.processImages(),this.setupImageLoading(),this.config.justified_gallery&&this.initJustifiedGallery(),this.config.modal&&this.initLightGallery()})}loadDependencies(){return new Promise(t=>{if(typeof jQuery>"u"){console.error("Gallery: jQuery is required but not loaded"),t();return}typeof window.lightGallery>"u"&&console.error("Gallery: lightGallery is required but not loaded"),typeof jQuery.fn.justifiedGallery>"u"&&console.error("Gallery: justifiedGallery is required but not loaded"),t()})}processImages(){let t=document.querySelectorAll(".image-figure");if(console.log("Gallery: Found",t.length,"image figures"),t.length===0)return;let i=this.detectImageGroups(t);console.log("Gallery: Detected",i.length,"image groups"),i.forEach((e,l)=>{console.log(`Gallery: Group ${l} has ${e.length} images`),e.length>1&&this.config.justified_gallery?(console.log(`Gallery: Creating justified gallery for group ${l} with ${e.length} images`),this.createJustifiedGalleryGroup(e,l)):(console.log(`Gallery: Keeping group ${l} as individual images`),this.processIndividualImages(e))})}detectImageGroups(t){let i=[],e=[];for(let l=0;l<t.length;l++){let a=t[l],s=t[l+1];e.push(a),!(s&&this.areConsecutiveByEmptyLine(a,s))&&e.length>0&&(i.push(e),e=[])}return e.length>0&&i.push(e),i}areConsecutiveByEmptyLine(t,i){let e=t.nextElementSibling;for(;e&&e!==i;){if(e.nodeType===Node.TEXT_NODE)if(e.textContent.trim()===""){e=e.nextElementSibling;continue}else return!1;if(e.nodeType===Node.ELEMENT_NODE){if(e.matches(".image-figure")){e=e.nextElementSibling;continue}let l=e.tagName.toLowerCase(),a=e.textContent.trim();if(l==="p"&&a==="")return!1;if(l==="br"){e=e.nextElementSibling;continue}else{if(a!=="")return!1;e=e.nextElementSibling;continue}}e=e.nextElementSibling}return e===i}processIndividualImages(t){t.forEach(i=>{i.classList.add("single-image")})}createJustifiedGalleryGroup(t,i){let e=document.createElement("div");e.className="not-prose justified-gallery-container my-8",e.setAttribute("data-gallery-group",i),e.id=`justified-gallery-${i}`,t.forEach(l=>{let a=l.querySelector(".image-container"),s=l.querySelector(".image-caption"),n=l.querySelector("img");if(a&&n){let d=document.createElement("a");d.className="gallery-item";let u=n.src,r=n.alt||"",g=n.title||"",c=n.getAttribute("data-src")||u;d.href=c,d.setAttribute("data-src",c),n.naturalWidth&&n.naturalHeight&&d.setAttribute("data-lg-size",`${n.naturalWidth}-${n.naturalHeight}`);let o="",y=n.getAttribute("data-modal");if(y){let h=y.match(/title:\s*([^;]+)/),p=y.match(/description:\s*([^;]+)/);(h||p)&&(h&&(o+=`<h4>${h[1].trim()}</h4>`),p&&(o+=`<p>${p[1].trim()}</p>`))}else if(g&&r&&g!==r)o=`<h4>${g}</h4><p>${r}</p>`;else if(g)o=`<h4>${g}</h4>`;else if(r)o=`<p>${r}</p>`;else if(s){let h=s.textContent.trim();h&&(o=`<p>${h}</p>`)}o&&d.setAttribute("data-sub-html",o);let m=document.createElement("img");m.src=u,m.alt=r,m.className="img-responsive",m.loading="lazy",d.appendChild(m),e.appendChild(d)}}),t[0].parentNode.insertBefore(e,t[0]),t.forEach(l=>l.remove()),this.galleries.push({container:e,id:e.id,index:i})}setupImageLoading(){document.querySelectorAll(".gallery-item img, .single-image img, .individual-image-lightgallery img, .image-container img").forEach(i=>{i.complete?i.classList.add("loaded"):i.addEventListener("load",()=>{i.classList.add("loaded")})})}initJustifiedGallery(){let t=document.querySelectorAll(".justified-gallery-container");t.length!==0&&t.forEach(i=>{let e=jQuery(i),l={captions:!1,lastRow:"nojustify",rowHeight:this.config.responsive?.rowHeight||180,margins:this.config.responsive?.margins||5,randomize:!1,waitThumbnailsLoad:!0,justifyThreshold:.75};console.log("Gallery: Initializing Justified Gallery for",i.id),e.justifiedGallery(l).on("jg.complete",()=>{console.log("Gallery: Justified Gallery complete for",i.id),this.config.modal&&this.initLightGalleryForContainer(i)}).on("jg.resize",()=>{console.log("Gallery: Justified Gallery resized for",i.id)}),this.justifiedGalleryInstances.push({container:i,jquery:e})})}initLightGallery(){if(!this.config.modal){console.log("Gallery: modal is disabled");return}document.querySelectorAll(".single-image").forEach((i,e)=>{i.querySelector("img")&&this.initLightGalleryForIndividualImage(i,e)})}initLightGalleryForContainer(t){if(typeof window.lightGallery>"u"){console.error("Gallery: lightGallery is not available");return}console.log("Gallery: Initializing lightGallery for",t.id);let i={autoplayFirstVideo:!1,pager:!1,galleryId:t.id,hideScrollbar:!0,mousewheel:!0,plugins:[window.lgZoom,window.lgThumbnail].filter(Boolean),thumbnail:!0,thumbWidth:100,thumbHeight:"80px",thumbMargin:5,animateThumb:!0,alignThumbnails:"middle",currentPagerPosition:"middle",appendThumbnailsTo:".lg-components",thumbnailSwipeThreshold:10,controls:!0,download:!0,counter:!0,mobileSettings:{controls:!1,showCloseIcon:!0,download:!1,rotate:!1,thumbnail:!0}},e=window.lightGallery(t,i);this.lightGalleryInstances.push({container:t,instance:e})}initLightGalleryForIndividualImage(t,i){let e=t.querySelector("img"),l=t.querySelector(".image-caption");if(!e||!this.config.modal)return;let a=document.createElement("div");a.className="individual-image-lightgallery",a.id=`individual-image-${i}`;let s=document.createElement("a");s.href=e.src,s.setAttribute("data-src",e.src),e.naturalWidth&&e.naturalHeight&&s.setAttribute("data-lg-size",`${e.naturalWidth}-${e.naturalHeight}`);let n="",d=e.getAttribute("data-modal"),u=e.title||"",r=e.alt||"";if(d){let c=d.match(/title:\s*([^;]+)/),o=d.match(/description:\s*([^;]+)/);(c||o)&&(c&&(n+=`<h4>${c[1].trim()}</h4>`),o&&(n+=`<p>${o[1].trim()}</p>`))}else if(u&&r&&u!==r)n=`<h4>${u}</h4><p>${r}</p>`;else if(u)n=`<h4>${u}</h4>`;else if(r)n=`<p>${r}</p>`;else if(l){let c=l.textContent.trim();c&&(n=`<p>${c}</p>`)}n&&s.setAttribute("data-sub-html",n);let g=e.cloneNode(!0);s.appendChild(g),a.appendChild(s),t.parentNode.insertBefore(a,t),t.remove(),this.initLightGalleryForContainer(a)}updateLayout(){this.justifiedGalleryInstances.forEach(t=>{t.jquery&&t.jquery.justifiedGallery("norewind")})}destroy(){this.justifiedGalleryInstances.forEach(t=>{t.jquery&&t.jquery.justifiedGallery("destroy")}),this.justifiedGalleryInstances=[],this.lightGalleryInstances.forEach(t=>{t.instance&&t.instance.destroy()}),this.lightGalleryInstances=[]}},b=new f,G;window.addEventListener("resize",()=>{clearTimeout(G),G=setTimeout(()=>{b.updateLayout()},250)});window.ImageGallery=f;})();
